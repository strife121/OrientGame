<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="robots" content="noindex,nofollow,noarchive" />
    <title>Ski-O Map Memory Multiplayer</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="layout">
      <section class="sidebar">
        <h1>Ski-O Memory MP</h1>
        <p class="subtitle">Одинаковая карта и дистанция для всех игроков в комнате.</p>

        <div id="status" class="status">Не подключено</div>

        <div id="joinPanel" class="panel">
          <label class="label" for="nameInput">Имя</label>
          <input id="nameInput" class="input" maxlength="24" />
          <div class="row row-tight">
            <div class="color-meta">
              <span id="joinColorPreview" class="player-color"></span>
              <span id="joinColorHex" class="color-hex">#000000</span>
            </div>
            <button id="joinRandomColorBtn" class="btn btn-small btn-alt" type="button">Случ. цвет</button>
          </div>

          <label class="label" for="roomInput">Комната</label>
          <input id="roomInput" class="input" maxlength="24" placeholder="например, AB12CD" />

          <div class="row">
            <button id="createRoomBtn" class="btn">Создать</button>
            <button id="joinRoomBtn" class="btn btn-alt">Войти</button>
          </div>
        </div>

        <div id="roomPanel" class="panel hidden">
          <div class="row row-tight">
            <div>Комната: <strong id="roomCode">-</strong></div>
            <button id="copyLinkBtn" class="btn btn-small">Копировать ссылку</button>
          </div>

          <div id="roomProfileBox" class="profile-box">
            <label class="label" for="roomNameInput">Профиль</label>
            <div class="row">
              <input id="roomNameInput" class="input input-compact" maxlength="24" />
              <button id="saveNameBtn" class="btn btn-small" type="button">Имя</button>
            </div>
            <div class="row row-tight">
              <div class="color-meta">
                <span id="roomColorPreview" class="player-color"></span>
                <span id="roomColorHex" class="color-hex">#000000</span>
              </div>
              <button id="roomRandomColorBtn" class="btn btn-small btn-alt" type="button">Случ. цвет</button>
            </div>
          </div>

          <label class="checkbox-inline observer-toggle" for="observerModeInput">
            <input id="observerModeInput" type="checkbox" />
            Режим наблюдателя
          </label>

          <div id="raceButtonsRow" class="row row-tight">
            <button id="btnNewMap" class="btn btn-small">Новая карта</button>
            <button id="btnNewLeg" class="btn btn-small">Новая нога</button>
            <button id="btnStart" class="btn btn-small">Старт</button>
            <button id="btnMap" class="btn btn-small hidden">MAP</button>
            <button id="btnWithdraw" class="btn btn-small btn-danger hidden">Сойти</button>
          </div>

          <div id="courseConfigRow" class="row row-tight">
            <label class="label-inline" for="checkpointCountInput">КП</label>
            <input id="checkpointCountInput" class="input input-small" type="number" min="1" max="10" value="3" />
            <button id="saveCheckpointBtn" class="btn btn-small" type="button">Сохранить КП</button>
            <label class="checkbox-inline" for="showPositionOnMapInput">
              <input id="showPositionOnMapInput" type="checkbox" checked />
              Показывать позицию на карте
            </label>
          </div>

          <div id="timerBadge" class="timer">00:00.0</div>

          <div id="playersSection">
            <h2>Игроки</h2>
            <ul id="playersList" class="players"></ul>
          </div>

          <div id="resultsSection">
            <div class="results-head">
              <h2>Результаты</h2>
              <label class="switch">
                <input id="showSplitsToggle" type="checkbox" />
                <span class="switch-slider"></span>
                <span class="switch-label">Сплиты</span>
              </label>
            </div>
            <table class="results">
              <thead>
                <tr>
                  <th id="resultsCol1">#</th>
                  <th id="resultsCol2">Игрок</th>
                  <th id="resultsCol3">Время</th>
                </tr>
              </thead>
              <tbody id="resultsBody"></tbody>
            </table>
          </div>
        </div>
      </section>

      <section id="canvasWrap" class="canvas-wrap">
        <canvas id="canvas"></canvas>
        <div id="countdownOverlay" class="countdown-overlay hidden">
          <span id="countdownValue" class="countdown-value">5</span>
        </div>
      </section>
    </main>

    <script src="/socket.io/socket.io.js"></script>
    <script src="./game.js"></script>
  </body>
</html>
